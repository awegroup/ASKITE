# kite name
kite_name: !!str "V3_25"

# sim_name, straight/crosswind/circular
sim_name: !!str "straight"

## Actuation
##TODO: remove these old ones (first 3) you don't actually use them
# depower
u_p: !!float 1.0
depower_tape_extension_percentage: !!float 8.0
# steering
delta_ls_ini: !!float 0.00
## NEW - in meters
depower_tape_extension_step: !!float 0.01
depower_tape_final_extension: !!float 0.05
steering_tape_extension_step: !!float 0
steering_tape_final_extension: !!float 0

# Aerodynamic -ChildClass: aero
aero:
  n_aero_panels_per_struc_section: !!int 2
  ring_geometry: !!str "5fil"
  model: !!str "VSM"
  n_iter: !!int 1500
  error_limit: !!float 1.0e-5
  relax_factor: !!float 0.03
  n_splits: !!int 2
  cd_cylinder: !!float 1.1
  cd_shear_cylinder: !!float 0.02
  cd_multiplier: !!float 1.0
  n_chordwise_aero_nodes: !!int 10 #TODO: more would better

# Solve -  ChildClass: solver
solver:
  method: !!str "root"
  tol: !!float 20.0
  max_fev: !!int 2000
  integration_method: !!str "df-sane"
  newton_rtol: !!float 10.0
  newton_max_iter: !!int 2000
  newton_disp: !!bool false
  damping_constant: !!float 0.9
  is_with_visc_damping: !!bool true
  dt: !!float 0.01 #crucial that this remains low
  n_time_steps: !!int 1000
  abs_tol: !!float 1.0e-50
  rel_tol: !!float 1.0e-5
  max_iter: !!int 50000

#  ChildClass: aerostructural
aero_structural:
  max_iter: !!int 2500
  it_check: !!int 5
  tol: !!float 25
  crosswind_max_iter: !!int 50
  crosswind_tol: !!float 0.01
  crosswind_relax_factor: !!float 0.5

tether: # set to zero, if you don't want tether force
  diameter: !!float 0.04
  length: !!float 100.0
  density: !!float 1.0

## output_settings:
is_print_mid_results: !!bool true
is_with_initial_structure_plot: !!bool true
is_with_coupling_plot: !!bool false
is_with_plot_per_iteration: !!bool false
is_with_aero_plot_per_iteration: !!bool false
is_with_final_plot: !!bool true
is_with_plotly_plot: !!bool false
is_with_aero_geometry: !!bool false
is_with_printing: !!bool false

## plotting
is_with_plotting: !!bool false
plot_format: !!str "png"
plot_elev: !!seq [9.14, 9.14]
plot_azim: !!seq [90, 230]

## animation
is_with_animation: !!bool false
animation_fps: !!int 10
animation_dpi: !!int 100
animation_bitrate: !!int 2000
animation_elev: !!float 9.14
animation_azim: !!float 230.0

## simulation_settings
is_run_only_1_time_step: !!bool false
is_with_velocity_initialisation: !!bool false
n_vel_initialisation_steps: !!int 10
coupling_method: !!str "NN"
is_from_filename: !!bool false
is_with_initial_point_velocity: !!bool false
is_billowing_on: !!bool true
is_with_gravity: !!bool true
is_with_aero_bridle: !!bool true
is_with_aero_tether: !!bool true
bridle_initial_compression_factor: !!float 1.0
geometric_scaling_factor: !!float 1.0

#TODO: these are now hardcoded in "solver_utils"
## crosswind flight settings
tol_fx_ratio_to_fz: !!float 0.0

## physical_constants:
grav_constant: !!seq [0, 0, -9.81]
rho: !!float 1.225
mu: !!float 1.789e-05

# settings needed for crosswind & circular case here set to default values
tol_fx_ratio_to_fz: !!float 0
tol_vk_optimization: !!float 0
vk_x_initial_guess_factor_of_vw: !!float 0
is_with_varying_va: !!bool false
r_0_initial: !!float 0

# Straight case 
is_with_vk_optimization: false
is_circular_case: false
is_print_intermediate_results: true
is_with_gravity: false
### inflow conditions
vel_wind: !!seq [12, 0, 2]
vel_kite: !!seq [0, 0, 0]
acc_kite: !!seq [0, 0, 0]

# # Crosswind case
# is_with_vk_optimization: true
# is_circular_case: false
# is_print_intermediate_results: false
# is_with_gravity: false
# ### inflow conditions
# vel_wind: !!seq [0,0,4]
# # This is an initial guess for the kite velocity
# vel_kite: !!seq [-20, 0, 0]
# acc_kite: !!seq [0, 0, 0]
# ### other
# tol_fx_ratio_to_fz: !!float 0.005
# tol_vk_optimization: !!float 0.1
# vk_x_initial_guess_factor_of_vw: !!float -5.0