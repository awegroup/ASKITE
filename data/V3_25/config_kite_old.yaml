# Surfplan file name
surfplan_filename: !!str "V3_25"

# Kite geometry
# # TODO: this should be an output of the struc2aero
# area_projected: !!float 19.753
# # # TODO: Should be generated/imported from the surfplan file instead
# ref_chord: !!float 2.2
# # TODO: Should be generated/imported from the surfplan file instead
wing_mass: !!float 11.0 #kg
area_surface: !!float 25 #m2

# stiffnesses
# va ~10 1e4 #2024/03/24
# va ~20 5e4 #2024/02/24
# va ~30 6e5
# va ~40 6.5e5
stiffness_bridle: !!float 5e4
stiffness_tube: !!float 5e4
stiffness_trailing_edge: !!float 5e4
stiffness_canopy: !!float 1e3

# structural settings
is_with_elongation_limit: !!bool true
elongation_limit: !!float 1.15
is_with_compression_limit: !!bool true
compression_limit: !!float .85
# the factor by which stiffness is increased if over the limit
limit_stiffness_factor: !!float 10.
is_with_rotational_resistance: !!bool false

#TODO: below should be removed at some point
## airfoil import settings
is_tube_diameter_dimensionless: !!bool false
is_canopy_max_height_dimensionless: !!bool true

#TODO: below shouldn't all be hardcoded
## bridles
bridle:
  diameter: !!float 0.01
  density: !!float 230
  bridle_point_index: !!int 0
  #TODO: should delete these
  cd: !!float 1.1
  #TODO: check this value
  cd_shear: !!float 0.02
  depower_tape_index: !!int 1
  left_steering_tape_index: !!int 2
  right_steering_tape_index: !!int 3

## pulleys
pulley:
  point_indices: !!seq [24, 28] #TODO: this should be extracted from the CAD file
  mass: !!float 0.1
  number_of_pulleys_in_back_lines: !!int 2 #is info to read out the CAD

## KCU
# N.Gechiere     --> CD: 0.47, Diameter: 0.38
# M.Schelbergen  --> CD: 1.0, Area: 0.25 (would be diam: .565m)
kcu:
  drag_coefficient: !!float 0.47
  diameter: !!float 0.38
  index: !!int 21
  mass: !!float 8.4

#TODO: should read from Surfplan instead of hardcoded
# some airfoil parameters
billowing_angles: !!seq [1, 10, 15, 18, 20, 18, 15, 10, 1]
tube_diameters:
  !!seq [
    0.1,
    0.151561,
    0.178254,
    0.19406,
    0.202418,
    0.202418,
    0.19406,
    0.178254,
    0.151561,
    0.1,
  ]
canopy_max_heights:
  !!seq [0.02, 0.03, 0.04, 0.05, 0.06, 0.06, 0.05, 0.04, 0.03, 0.02]

wing_connectivity:
  ci: [19, 2, 18, 1, 19, 2, 2, 3, 17, 18,
        2, 3, 3, 4, 16, 17, 3, 4, 4, 5,
        15, 16, 4, 5, 5, 6, 14, 15, 5, 6,
        6, 7, 13, 14, 6, 7, 7, 8, 12, 13,
        7, 8, 8, 9, 11, 12, 8, 9, 9, 20,
        10, 11, 9, 20]

  cj: [2, 18, 1, 19, 18, 1, 3, 17, 18, 2,
        17, 18, 4, 16, 17, 3, 16, 17, 5, 15,
        16, 4, 15, 16, 6, 14, 15, 5, 14, 15,
        7, 13, 14, 6, 13, 14, 8, 12, 13, 7,
        12, 13, 9, 11, 12, 8, 11, 12, 20, 10,
        11, 9, 10, 11]

bridle_connectivity:
  ci: [0, 21, 21, 21, 22, 22, 23, 23, 27, 27,
        24, 24, 28, 28, 25, 25, 29, 29, 26, 26,
        30, 30, 0, 0, 31, 31, 34, 34, 32, 32,
        35, 35, 33, 33, 36, 36, 24, 28, 31, 34]

  cj: [21, 22, 23, 27, 24, 28, 24, 1, 28, 10,
        25, 26, 29, 30, 18, 17, 11, 12, 16, 15,
        13, 14, 31, 34, 32, 33, 35, 36, 2, 3,
        9, 8, 4, 5, 7, 6, 19, 20, 19, 20]

te_line_indices: [32, 2, 38, 8, 44, 14, 50, 20, 26]

tube_line_indices: [0, 1, 3, 6, 7, 9, 12, 13, 15, 18, 19, 21, 24, 25, 27, 30, 31, 33, 36, 37, 39, 42, 43, 45, 48, 49, 51]

pulley_line_indices: [6, 4, 8, 5]

plate_point_indices:
  - [19, 2, 18, 1]
  - [2, 3, 17, 18]
  - [3, 4, 16, 17]
  - [4, 5, 15, 16]
  - [5, 6, 14, 15]
  - [6, 7, 13, 14]
  - [7, 8, 12, 13]
  - [8, 9, 11, 12]
  - [9, 20, 10, 11]

points:
  - [0, 0.0, 0.0, 0.0, "bridle", "knot"]
  - [1, 1.5450326776836745, 4.130039796867375, 7.261364950271782, "wing", "te"]
  - [2, -0.01769468978128639, 3.9841196033007544, 8.497033387639695, "wing", "le"]
  - [3, -0.23864988658488862, 3.147085371141592, 9.816746227504566, "wing", "le"]
  - [4, -0.3852940131556698, 1.9677011127725468, 10.6073565473802, "wing", "le"]
  - [5, -0.4584192791195412, 0.6669541551721638, 10.948973784300064, "wing", "le"]
  - [6, -0.4584192791195412, -0.6669541551721638, 10.948973784300064, "wing", "le"]
  - [7, -0.3852940131556698, -1.9677011127725468, 10.6073565473802, "wing", "le"]
  - [8, -0.23864988658488862, -3.147085371141592, 9.816746227504566, "wing", "le"]
  - [9, -0.01769468978128639, -3.9841196033007544, 8.497033387639695, "wing", "le"]
  - [10, 1.5450326776836745, -4.130039796867375, 7.261364950271782, "wing", "te"]
  - [11, 1.7103966474299823, -3.9715968676171474, 8.492040169869373, "wing", "te"]
  - [12, 2.0106621688737727, -3.12943184814695, 9.787197879905024, "wing", "te"]
  - [13, 2.118729000086964, -1.9545056515510937, 10.55854695742184, "wing", "te"]
  - [14, 2.16733994663813, -0.6634087911809183, 10.889841638961673, "wing", "te"]
  - [15, 2.16733994663813, 0.6634087911809183, 10.889841638961673, "wing", "te"]
  - [16, 2.118729000086964, 1.9545056515510937, 10.55854695742184, "wing", "te"]
  - [17, 2.0106621688737727, 3.12943184814695, 9.787197879905024, "wing", "te"]
  - [18, 1.7103966474299823, 3.9715968676171474, 8.492040169869373, "wing", "te"]
  - [19, 0.8630767430175426, 4.1565, 7.423819809051551, "wing", "le"]
  - [20, 0.8630767430175426, -4.1565, 7.423819809051551, "wing", "le"]
  - [21, 0.17884119251811076, 0.0, 0.9330143770911036, "bridle", "knot"]
  - [22, 0.4176659156066993, 0.0, 2.0047264427326446, "bridle", "knot"]
  - [23, 0.4765199236180079, 0.515701635045511, 2.4187272340933115, "bridle", "knot"]
  - [24, 1.0118690598081908, 0.85948465466864, 4.671178520435504, "bridle", "pulley"]
  - [25, 1.447067774285811, 2.71993276851239, 7.354965134765166, "bridle", "knot"]
  - [26, 1.5342469795828642, 1.3437933594787979, 7.833401527870664, "bridle", "knot"]
  - [27, 0.4765199236180079, -0.515701635045511, 2.4187272340933115, "bridle", "knot"]
  - [28, 1.0118690598081908, -0.85948465466864, 4.671178520435504, "bridle", "pulley"]
  - [29, 1.447067774285811, -2.71993276851239, 7.354965134765166, "bridle", "knot"]
  - [30, 1.5342469795828642, -1.3437933594787979, 7.833401527870664, "bridle", "knot"]
  - [31, -0.06579255760134889, 1.3268467003328777, 5.531595097127407, "bridle", "knot"]
  - [32, -0.042661843847079224, 2.0553030306836795, 7.2551007793587665, "bridle", "knot"]
  - [33, -0.09211118715063556, 1.267408888894257, 7.827716375899725, "bridle", "knot"]
  - [34, -0.06579255760134889, -1.3268467003328777, 5.531595097127407, "bridle", "knot"]
  - [35, -0.042661843847079224, -2.0553030306836795, 7.2551007793587665, "bridle", "knot"]
  - [36, -0.09211118715063556, -1.267408888894257, 7.827716375899725, "bridle", "knot"]


# [Index, [x], [y], [z], [type], d_tube, y_camber]
airfoils:
  - [0, 0, 0, 0, 'le', 0.0, 0.0]
  - [1, 0, 0, 0, 'te', 0.0, 0.0]

# [Index, [x], [y], [z], [type], d_tube, y_camber]
bridle_nodes:
  - [0, 0, 0, 0, 'knot']
  - [1, 0, 0, 0, 'pulley']
  - [2, 0, 0, 0, 'LAP']

wing_ci:
  - [0,1,..]
wing_cj:
  - [1,3,..]
bridle_ci:
  - [0,1,..]
bridle_cj:
  - [1,3,..]


airfoils:
  headers: [LE_x, LE_y, LE_z, TE_x, TE_y, TE_z, is_strut, d_tube, x_camber, y_camber, delta_te_angle]
  data:
    - [  0.52218,  4.100957,  0.921215,  0.86682,  4.152601, 0.932607, false, 0.1837401335882308, 0.175,    0.095, 7.236059407808 ]
    - [  0.263184, 4.105533,  0.971623,  0.874727, 4.141856, 0.979216, false, 0.0788201065048211, 0.175,    0.0943989, 7.190368107183929 ]
    - [  0.028112, 4.099444,  1.049881,  0.887481, 4.124523, 1.054402, false, 0.0782455219828932, 0.175,    0.0931918, 7.09858931152246 ]
    - [ -0.183243, 4.085799,  1.154511,  0.904737, 4.101072, 1.156125, false, 0.0778048283060423, 0.175,    0.0913686, 6.959991849812752 ]
    - [ -0.368472, 4.065552,  1.28343,   0.926149, 4.071974, 1.282342, false, 0.0774738261221235, 0.175,    0.0889127, 6.77307867106407 ]
    - [ -0.522929, 4.039112,  1.43433,   0.951369, 4.037700, 1.431014, false, 0.0772367956750012, 0.175,    0.0857993, 6.535954253411632 ]
    - [ -0.639766, 4.006563,  1.604842,  0.980052, 3.998721, 1.600098, false, 0.0770843584417728, 0.175,    0.0819918, 6.245645663242954 ]
    - [ -0.709238, 3.967978,  1.791356,  1.011852, 3.955506, 1.787553, true,  0.0769999920939645, 0.175,    0.0774354, 5.89778958283452 ]
    - [ -0.790880, 3.805350,  2.209568,  1.189372, 3.789238, 2.199439, false, 0.0769999920939645, 0.175,    0.0720449, 5.4857603163031 ]
    - [ -0.864219, 3.501223,  2.540205,  1.256822, 3.485499, 2.522089, false, 0.131075032683328,  0.175,    0.0656764, 4.998180839539486 ]
    - [ -0.929298, 3.134335,  2.796493,  1.310901, 3.116753, 2.773988, true,  0.1036781577453383, 0.175,    0.0580515, 4.413496767844407 ]
    - [ -0.986158, 2.798300,  3.092998,  1.354755, 2.780285, 3.065722, false, 0.0872295732744705, 0.0395115, 0.0405837, 2.4194934259466265 ]
    - [ -1.034831, 2.393198,  3.288677,  1.390237, 2.380855, 3.254511, false, 0.0766805595131155, 0.1698522, 0.0532971, 4.017724967780509 ]
    - [ -1.075348, 1.959729,  3.398648,  1.418530, 1.946587, 3.361473, true,  0.0698647554531404, 0.1570528, 0.0486997, 3.620410445793709 ]
    - [ -1.107733, 1.553762,  3.587398,  1.440421, 1.540958, 3.547442, false, 0.0880585272944216, 0.1302726, 0.0445819, 3.221588390954849 ]
    - [ -1.132004, 1.111239,  3.671702,  1.456442, 1.107796, 3.627957, false, 0.0818347949026424, 0.0756326, 0.0413752, 2.8212890716246197 ]
    - [ -1.148177, 0.664252,  3.658834,  1.466944, 0.660721, 3.613797, true,  0.0805359612271219, 0.0490663, 0.0401800, 2.419543557580738 ]
    - [ -1.156262, 0.225013,  3.741837,  1.472144, 0.220752, 3.696209, false, 0.0795641444833332, 0.0395115, 0.0405837, 2.4194934259466265 ]
    - [ -1.156262,-0.225013,  3.741837,  1.472144,-0.220752, 3.696209, false, 0.0795641444833332, 0.0395115, 0.0405837, 2.4194934259466265 ]
    - [ -1.148177,-0.664252,  3.658834,  1.466944,-0.660721, 3.613797, true,  0.0805359612271219, 0.0490663, 0.0401800, 2.419543557580738 ]
    - [ -1.132004,-1.111239,  3.671702,  1.456442,-1.107796, 3.627957, false, 0.0818347949026424, 0.0756326, 0.0413752, 2.8212890716246197 ]
    - [ -1.107733,-1.553762,  3.587398,  1.440421,-1.540958, 3.547442, false, 0.0880585272944216, 0.1302726, 0.0445819, 3.221588390954849 ]
    - [ -1.075348,-1.959729,  3.398648,  1.418530,-1.946587, 3.361473, true,  0.0698647554531404, 0.1570528, 0.0486997, 3.620410445793709 ]
    - [ -1.034831,-2.393198,  3.288677,  1.390237,-2.380855, 3.254511, false, 0.0766805595131155, 0.1698522, 0.0532971, 4.017724967780509 ]
    - [ -0.986158,-2.798300,  3.092998,  1.354755,-2.780285, 3.065722, false, 0.0872295732744705, 0.0395115, 0.0405837, 2.4194934259466265 ]
    - [ -0.929298,-3.134335,  2.796493,  1.310901,-3.116753, 2.773988, true,  0.1036781577453383, 0.175,    0.0580515, 4.413496767844407 ]
    - [ -0.864219,-3.501223,  2.540205,  1.256822,-3.485499, 2.522089, false, 0.131075032683328,  0.175,    0.0656764, 4.998180839539486 ]
    - [ -0.790880,-3.805350,  2.209568,  1.189372,-3.789238, 2.199439, false, 0.0769999920939645, 0.175,    0.0720449, 5.4857603163031 ]
    - [ -0.709238,-3.967978,  1.791356,  1.011852,-3.955506, 1.787553, true,  0.0769999920939645, 0.175,    0.0774354, 5.89778958283452 ]
    - [ -0.639766,-4.006563,  1.604842,  0.980052,-3.998721, 1.600098, false, 0.0770843584417728, 0.175,    0.0819918, 6.245645663242954 ]
    - [ -0.522929,-4.039112,  1.434330,  0.951369,-4.037700, 1.431014, false, 0.0772367956750012, 0.175,    0.0857993, 6.535954253411632 ]
    - [ -0.368472,-4.065552,  1.283430,  0.926149,-4.071974, 1.282342, false, 0.0774738261221235, 0.175,    0.0889127, 6.77307867106407 ]
    - [ -0.183243,-4.085799,  1.154511,  0.904737,-4.101072, 1.156125, false, 0.0778048283060423, 0.175,    0.0913686, 6.959991849812752 ]
    - [  0.028112,-4.099444,  1.049881,  0.887481,-4.124523, 1.054402, false, 0.0782455219828932, 0.175,    0.0931918, 7.09858931152246 ]
    - [  0.263184,-4.105533,  0.971623,  0.874727,-4.141856, 0.979216, false, 0.0788201065048211, 0.175,    0.0943989, 7.190368107183929 ]
    - [  0.522180,-4.100957,  0.921215,  0.866820,-4.152601, 0.932607, false, 0.1837401335882308, 0.175, 0.095,    7.236059407808 ]

bridle_nodes:
  headers: [id, x, y, z, type, spec]
  data:
    - [21,  0.17884119251811076,  0.0,                  0.9330143770911036,  knot,  ""]
    - [22,  0.4176659156066993,   0.0,                  2.0047264427326446,  knot,  ""]
    - [23,  0.4765199236180079,   0.515701635045511,    2.4187272340933115,  knot,  ""]
    - [24,  1.0118690598081908,   0.85948465466864,     4.671178520435504,   pulley,""]
    - [25,  1.447067774285811,    2.71993276851239,     7.354965134765166,  knot,  ""]
    - [26,  1.5342469795828642,   1.3437933594787979,   7.833401527870664,  knot,  ""]
    - [27,  0.4765199236180079,  -0.515701635045511,    2.4187272340933115,  knot,  ""]
    - [28,  1.0118690598081908,  -0.85948465466864,     4.671178520435504,   pulley,""]
    - [29,  1.447067774285811,   -2.71993276851239,     7.354965134765166,  knot,  ""]
    - [30,  1.5342469795828642,  -1.3437933594787979,   7.833401527870664,  knot,  ""]
    - [31, -0.06579255760134889,  1.3268467003328777,   5.531595097127407,  knot,  ""]
    - [32, -0.042661843847079224, 2.0553030306836795,   7.2551007793587665, knot,  ""]
    - [33, -0.09211118715063556,  1.267408888894257,    7.827716375899725,  knot,  ""]
    - [34, -0.06579255760134889, -1.3268467003328777,   5.531595097127407,  knot,  ""]
    - [35, -0.042661843847079224,-2.0553030306836795,   7.2551007793587665, knot,  ""]
    - [36, -0.09211118715063556, -1.267408888894257,    7.827716375899725,  knot,  ""]


bridle_connectivity:
  ci: [0, 21, 21, 21, 22, 22, 23, 23, 27, 27,
        24, 24, 28, 28, 25, 25, 29, 29, 26, 26,
        30, 30, 0, 0, 31, 31, 34, 34, 32, 32,
        35, 35, 33, 33, 36, 36, 24, 28, 31, 34]

  cj: [21, 22, 23, 27, 24, 28, 24, 1, 28, 10,
        25, 26, 29, 30, 18, 17, 11, 12, 16, 15,
        13, 14, 31, 34, 32, 33, 35, 36, 2, 3,
        9, 8, 4, 5, 7, 6, 19, 20, 19, 20]


bridle_line_system_surfplan:
  headers: [p1_x, p1_y, p1_z, p2_x, p2_y, p2_z, diameter, p1_type, p2_type]
  data:
    - [-1.123196, -0.658922,  3.590858, -1.014197, -0.682069,  3.407109, 0.002, "", ""]
    - [-1.051436, -1.937954,  3.337051, -0.942461, -1.898143,  3.164487, 0.002, "", ""]
    - [-0.907650, -3.097783,  2.749708, -0.791988, -3.052266,  2.575994, 0.002, "", ""]
    - [-0.692391, -3.921859,  1.777294, -0.616812, -3.825134,  1.648422, 0.002, "", ""]
    - [-1.014197, -0.682069,  3.407109, -0.769331, -0.887905,  1.721653, 0.002, "", ""]
    - [-0.942461, -1.898143,  3.164487, -0.731702, -1.532504,  1.590653, 0.002, "", ""]
    - [-0.791988, -3.052266,  2.575994, -0.607355, -2.644934,  1.015550, 0.002, "", ""]
    - [-0.616812, -3.825134,  1.648422, -0.618402, -2.172485, -0.743695, 0.002, "", ""]
    - [-0.769331, -0.887905,  1.721653, -0.711827, -1.113164, -0.195037, 0.003, "", ""]
    - [-0.731702, -1.532504,  1.590653, -0.711827, -1.113164, -0.195037, 0.003, "", ""]
    - [-0.607355, -2.644934,  1.015550, -0.618402, -2.172485, -0.743695, 0.003, "", ""]
    - [-0.711827, -1.113164, -0.195037, -0.633144, -0.941442, -3.901961, 0.004, "", ""]
    - [-0.618402, -2.172485, -0.743695, -0.633144, -0.941442, -3.901961, 0.004, "", ""]
    - [-0.633144, -0.941442, -3.901961, -0.630632, -0.910001, -4.099458, 0.005, "", ""]
    - [-0.966125, -0.659453,  3.597625, -1.014197, -0.682069,  3.407109, 0.002, "", ""]
    - [-0.901698, -1.939381,  3.341088, -0.942461, -1.898143,  3.164487, 0.002, "", ""]
    - [-0.773223, -3.097418,  2.749241, -0.791988, -3.052266,  2.575994, 0.002, "", ""]
    - [-0.589225, -3.908574,  1.773243, -0.616812, -3.825134,  1.648422, 0.002, "", ""]
    - [-0.362112, -0.670112,  3.733556, -0.769331, -0.887905,  1.721653, 0.002, "", ""]
    - [-0.326140, -1.977801,  3.449767, -0.731702, -1.532504,  1.590653, 0.002, "", ""]
    - [-0.256835, -3.148563,  2.814703, -0.607355, -2.644934,  1.015550, 0.002, "", ""]
    - [ 1.204082, -0.654966,  3.540403,  0.473306, -1.155974, -0.902939, 0.002, "", ""]
    - [ 1.167853, -1.920720,  3.288303,  0.473306, -1.155974, -0.902939, 0.002, "", ""]
    - [ 1.085876, -3.069960,  2.714095,  0.396111, -1.921865, -1.309919, 0.002, "", ""]
    - [ 0.839226, -3.891515,  1.768042,  0.396111, -1.921865, -1.309919, 0.002, "", ""]
    - [ 0.615380, -4.142726,  0.875716,  0.630484, -3.821673,  0.392361, 0.002, "", ""]
    - [ 0.791897, -4.137746,  0.864315,  0.630484, -3.821673,  0.392361, 0.002, "", ""]
    - [ 0.473306, -1.155974, -0.902939,  0.089481, -1.087879, -3.228214, 0.002, "", ""]
    - [ 0.396111, -1.921865, -1.309919,  0.089481, -1.087879, -3.228214, 0.002, "", ""]
    - [ 0.630484, -3.821673,  0.392361, -0.021095, -0.954417, -3.906964, 0.002, "", ""]
    - [ 0.089481, -1.087879, -3.228214, -0.021095, -0.954417, -3.906964, 0.003, "", ""]
    - [-0.021095, -0.954417, -3.906964, -0.052295, -0.910001, -4.099458, 0.004, "", ""]
